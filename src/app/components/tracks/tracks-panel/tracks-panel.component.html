<div class = "flex flex-column h-full w-full overflow-hidden select-none">
	<div class = "flex w-full h-3rem border-bottom-1 border-50">
		<div style = "width: 175px" class = "flex-shrink-0 flex align-items-center">
			<span class = "ml-4">Tracks</span>
		</div>
		<div class = "flex flex-grow-1 align-items-center overflow-hidden" #timelineNumbers>
			<span *ngFor = "let number of numbers" style = "width: 50px" class = "flex-grow-0 flex-shrink-0 text-center">
				{{convertToTime(number)}}
			</span>
		</div>
	</div>
	<div
		class = "w-full h-full overflow-hidden flex flex-grow-1"
	>
		<div style = "width: 200px" class = "h-full flex-shrink-0 overflow-hidden pb-9px border-right-1 border-50" #tracksDetails>
			<app-track-details
				*ngFor = "let track of tracks"
				[track] = "track"
				(onTrackDelete) = "tracksService.deleteTrack(track.id)"
			>
			</app-track-details>
			<div class = "flex justify-content-center w-full py-4">
				<button
					pButton
					class = "p-button-rounded"
					[icon] = "'pi pi-plus'"
					(click) = "tracksService.addTrack()"
				>
				</button>
			</div>
		</div>
		<div
			class = "overflow-auto flex-grow-1 h-full relative tracks-list"
			#tracksList
			(click) = "cs.unSelectClip()"
			(mouseup) = "completeDrag()"
			(mousemove) = "onDrag($event)"
		>
			<div
				id = "time-lines"
				#timeLines
				class = "absolute time-lines h-full"
				[style.height.px] = "tracksList.scrollHeight"
			>
			</div>
			<div class = "absolute min-w-full h-full w-max">
				<div
					id = "timeline-indicator"
					class = "absolute top-0 h-full"
					[style.left.px] = "timelineIndicatorPosition"
				></div>
				<ng-container *ngFor = "let track of tracks">
					<div
						class = "flex"
						(mousedown) = "originTrack = track"
						(mousemove) = "setPhantomClip($event, track)"
						(mouseleave) = "cs.phantomClip = null"
						(mouseup) = "addClip(track, $event)"
						[class.selected-track] = "tracksService.getSelectedTrack()?.id === track.id"
					>
						<app-track-contents
							[clips] = "track.clips ?? []"
							[colour] = "track.colour"
							class = "track-contents flex-grow-0 flex-shrink-0"
						>
						</app-track-contents>
						<app-clip
							*ngIf = "cs.phantomClip && hoveringTrack === track"
							[clip] = "cs.phantomClip"
							[colour] = "track.colour"
							class = "absolute opacity-50 pointer-events-none"
							[style.width.px] = "cs.phantomClip.duration*10"
							[style.left.px] = "cs.phantomClip.startTime*10"
						></app-clip>
						<div style = "width: 100px" class = "inline-block flex-grow-0 flex-shrink-0"></div>
					</div>
					<div
						class = "divider"
						[style.width.px] = "tracksList.scrollWidth"
					>
					</div>
				</ng-container>
				<div class = "flex justify-content-center w-full py-4" *ngIf = "tracks.length">
					<button
						pButton
						class = "p-button-rounded"
						[icon] = "'pi pi-plus'"
						(click) = "tracksService.addTrack()"
					>
					</button>
				</div>
				<div *ngIf = "!tracks.length" class = "flex w-full h-full align-items-center justify-content-center">
					<h1 class = "text-center select-none surface-ground p-4 pt-3 border-round">No Tracks :( <br> Right click to add one</h1>
				</div>
			</div>
		</div>
	</div>
</div>